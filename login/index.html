<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>JobsGuru.ai Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
<!--Nav Bar-->
    <nav class="navbar  navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid  ">
        <a class="navbar-brand" href="../index.html"><img src="../img/JobsGuru Logo Final - Primary-01.jpg" alt="logo" width="80" /></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <!--collapsible wrapper-->
        <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">About</a>
            </li>
            <li class="nav-item">
            <a class="nav-link" href="#">Resources</a>
            </li>
            <li class="nav-item">
            <a class="nav-link" href="#">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">FAQ</a>
              </li>
          </ul>
        </div>
      </div>
    </nav>
<!--End of Nav-->

<!--Sign Up Page Main Container-->
<div class="row">
  <div class="col">
    <div class="card" style="border:0">
      <div class="card-body m-5">
        <h3 class="card-title">Why JobsGuru?</h3>
        <h6 class="card-subtitle mb-2 text-body-secondary">Accelerate your job search with our AI-powered services.</h6><br>
        <p class="card-text"><b>Job-Resume Match Report:</b> Get personalized advice on job suitability.<br><br>
          <b>Tweak Resume:</b> Enhance your resume for better compatibility with ATS.<br><br>
          <b>Customized Cover Letter:</b> Tailor-made cover letters for every application.<br><br>
          <b>Interview Questions:</b> Prepare with relevant questions and answers.<br><br>
          <b>Mock Interview (Optional):</b> Practice with experienced coaches.</p>
      </div>
    </div>
  </div>

        <!--Sign Up Form-->
  <div class="col">
    <div class="container custom-mt mt-5">
      <h2 class="text-center">JobsGuru Sign up</h2>
      <div class="row justify-content-center">
        <div class="col-md-8"> 
          <div id="signupForm">
            <form onsubmit="submitForm(event); return false;">
            <div class="row">
              <!-- First Name -->
              <div class="col-md-6 mb-3">
                <label for="firstName" class="form-label">First Name</label>
                <input type="text" class="form-control" id="firstName" placeholder="Enter your first name" required="">
              </div>
              <!-- Last Name -->
              <div class="col-md-6 mb-3">
                <label for="lastName" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="lastName" placeholder="Enter your last name" required="">
              </div>
          </div>
              <!-- Email -->
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="email" class="form-label">Login Email</label>
              <input type="email" class="form-control" id="email" placeholder="Enter your email" required="">
                <div id="emailError" class="text-danger"></div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="country" class="form-label">Promotion Code</label>
              <input type="text" class="form-control" id="promoCode" placeholder="Enter your Promotion Code or leave blank">
            </div>
          </div>
            <!-- Password and Confirm Password -->
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="password" class="form-label">Password</label>
              <input type="password" class="form-control" id="password" placeholder="Enter your password" required="">
              <div id="passwordError" class="text-danger"></div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="confirmPassword" class="form-label">Confirm Password</label>
              <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm your password" required="">
                <div id="confirmPasswordError" class="text-danger"></div>
            </div>
          </div>
            <!-- Newsletter Checkbox -->
           <div class="form-check mb-3">
              <input type="checkbox" class="form-check-input" id="newsletter">
                <label class="form-check-label" for="newsletter">Iâ€™d like to get the latest updates.</label>
            </div>
              <!-- Terms and Services Checkbox -->
              <!-- <div class="form-check mb-3">
                  <input type="checkbox" class="form-check-input" id="terms" required>
                  <label class="form-check-label" for="terms">I have read and agree to the <a href="#">Terms of use</a></label>
              </div> -->
              <!-- Sign Up Button -->
              <button style="float: right;" type="submit" class="wide-button btn btn-primary btn-click bg-success">Sign Up</button>
          </form>
          </div>
      </div>
      </div>
  </div>
  <br><br>
  <!-- Add a placeholder for error messages -->
  <div>
  <center>
   <!-- <p><strong>Data URL:</strong> <span id="baseUrl"></span></p>
   <p><strong>API URL:</strong> <span id="apiUrl"></span></p> -->
   <div id="message" class="text-danger"></div>
  </center>
 </div>
    
  </div>
</div>
  <!--End of Sign up Main Container-->
</div>

<!--Footer-->
  <Footer class="bg-light mt-5 p-5 text-center">
    <h2 class="card-title">Connect</h2>
    <p class="card-text"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
      <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/>
    </svg> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16">
      <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/>
    </svg> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
      <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
    </svg></p><br>
    
    <div class="text-center">
     <p>Copywrite <script>document.write(new Date().getFullYear())</script> | Depp Developes</p>
    </div>
  </Footer>


      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      <!--Script copied from JobsGuru page-->
       <!-- Include Bootstrap JS and Popper.js (optional) -->
    <script src="./JobsGuru.ai - Signup_files/bootstrap.bundle.min.js"></script>
    <!-- Add the submit form logic -->
    <script src="./JobsGuru.ai - Signup_files/config_url.js"></script>
    <script>

        function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
        }
    // Load the configuration data
           configUrl.loadConfig(function() {
               // Once data is loaded, retrieve URLs
               var urls = configUrl.getUrls();
               baseUrl = urls.baseUrl
               apiUrl = urls.apiUrl
               console.log("base URL "+baseUrl)
               console.log("api URL "+apiUrl)
               // Display URLs in the HTML
               // document.getElementById('baseUrl').textContent = urls.baseUrl;
               // document.getElementById('apiUrl').textContent = urls.apiUrl;
            // This function is called after apiUrl is retrieved
            async function submitForm() {
                const first_name = document.querySelector("input[id='firstName']").value;
                const last_name = document.querySelector("input[id='lastName']").value;
                const login_email = document.querySelector("input[id='email']").value;
                const promo_code = document.querySelector("input[id='promoCode']").value;
                const password = document.querySelector("input[id='password']").value;

                //get the values passed by URL
                let promotion_code = getQueryParam('promo_code') || promo_code;
                let referent = getQueryParam('referent') || 'Default None';

 
                console.log("---verifying form input data ---")
                console.log("promo_code = "+promotion_code );
                console.log("referent = "+referent );

                console.log(first_name)
                console.log(last_name)
                console.log(login_email)
                console.log(password)
                console.log(promotion_code)
                // console.log(city)
                const data = { first_name, last_name, login_email, promotion_code, referent, password};
                try {
                    const response = await fetch(apiUrl + "/sign_up_customer/", {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    const result = await response.json();

                    if (response.ok) {
                        // Login successful, redirect to another page

                        console.log("First Name:", first_name);
                        localStorage.setItem("first_name", first_name);

                        window.location.href = `/frontend/signup_success.html?login_email=${encodeURIComponent(login_email)}`;
                    } else {
                        // Login failed, display an error message
                        const messageElement = document.getElementById("message");
                        if (messageElement) {
                            messageElement.textContent = "Sign up failed:  " + result.message;
                        } else {
                            console.error("Element with id 'message' not found.");
                        }
                    }
                } catch (error) {
                    console.error("An error occurred:", error);
                }
            }

            // Attach the submitForm function to the form's onsubmit event
            const form = document.querySelector("form");
            form.onsubmit = function (event) {
                event.preventDefault(); // Prevent the default form submission
                submitForm(); // Call the async function to handle the form submission
            };
        });
    </script>
  </body>
</html>
